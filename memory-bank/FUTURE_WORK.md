# üìã –ü–ª–∞–Ω –±—É–¥—É—â–∏—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫ (–î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ —ç–ø–∏–∫–∞–º.

---

## Epic 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1.1. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ JWT
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ.**
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í `middleware.ts` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ JWT.
- **–†–µ—à–µ–Ω–∏–µ:**
    - [x] –ó–∞–º–µ–Ω–∏—Ç—å `Buffer.from(body, 'base64url').toString()` –Ω–∞ `jwt.verify`.
    - [x] –û–±–µ—Å–ø–µ—á–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–Ω–µ–≤–∞–ª–∏–¥–Ω–∞—è –ø–æ–¥–ø–∏—Å—å, –∏—Å—Ç–µ–∫—à–∏–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è).
    - [x] –ü—Ä–æ–≤–µ–¥–µ–Ω–æ —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∑–∞—â–∏—Ç—ã —Ä–æ—É—Ç–æ–≤.

### 1.2. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ "–∑–∞–≤–∏—Å–∞–Ω–∏—è" —Å–±–æ—Ä–∫–∏
- **–°—Ç–∞—Ç—É—Å:** **–í—ã–ø–æ–ª–Ω–µ–Ω–æ.**
- **–ü—Ä–æ–±–ª–µ–º–∞:** Production-—Å–±–æ—Ä–∫–∞ (`next build`) –∑–∞–Ω–∏–º–∞–ª–∞ 8-10 –º–∏–Ω—É—Ç.
- **–†–µ—à–µ–Ω–∏–µ:**
    - [x] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã `FileStorageService` –∏ `CacheService`.
    - [x] –ü—Ä–∏–º–µ–Ω–µ–Ω –ø–∞—Ç—Ç–µ—Ä–Ω "–ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è" (lazy initialization) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ MinIO –∏ Redis —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ.

### 1.3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è FOUC
- **–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
- **–ó–∞–¥–∞—á–∏:**
    - [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ –º–∞–Ω—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production-–ø–æ–¥–æ–±–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.
    - [ ] –ù–∞–ø–∏—Å–∞—Ç—å E2E —Ç–µ—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Playwright –∏–ª–∏ Cypress), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ "–ø—Ä–æ–±–ª–µ—Å–∫–∞" –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## Epic 2: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

### 2.1. –í—ã–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ.**
- **–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π, –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –º–æ–¥—É–ª—å –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
- **–ó–∞–¥–∞—á–∏:**
    - [x] –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `src/lib/auth`.
    - [x] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤—Å—é –ª–æ–≥–∏–∫—É, —Å–≤—è–∑–∞–Ω–Ω—É—é —Å JWT (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è, –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞) –≤ —ç—Ç–æ—Ç –º–æ–¥—É–ª—å.
    - [x] –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å `AuthService` –¥–ª—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –≤—Ö–æ–¥–∞, –≤—ã—Ö–æ–¥–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Å—Å–∏–∏.

### 2.2. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ (–¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤).**
- **–ó–∞–¥–∞—á–∞:** –£–º–µ–Ω—å—à–∏—Ç—å –æ–±—ä–µ–º –ª–æ–≥–∏–∫–∏ –≤ API —Ä–æ—É—Ç–∞—Ö.
- **–ó–∞–¥–∞—á–∏:**
    - [x] –°–æ–∑–¥–∞—Ç—å `src/lib/services` –∏ `src/lib/repositories`.
    - [x] –°–æ–∑–¥–∞—Ç—å `DocumentRepository` –∏ —Å–µ—Ä–≤–∏—Å—ã `DocumentQueryService`, `DocumentCommandService`, `DocumentComposeService`.
    - [ ] –°–æ–∑–¥–∞—Ç—å `UserService` –∏ `UserRepository` –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
    - [x] –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ API —Ä–æ—É—Ç–æ–≤ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

### 2.3. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ "—Ç–æ–ª—Å—Ç—ã—Ö" –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–°—Ç–∞—Ç—É—Å:** ‚è≥ **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥.**
- **–ó–∞–¥–∞—á–∞:** –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã `DocumentUploadForm.tsx` –∏ `AdminDocumentsPage.tsx`.
- **–ó–∞–¥–∞—á–∏:**
    - [ ] –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Ñ–æ—Ä–º—ã –∑–∞–≥—Ä—É–∑–∫–∏ –≤ –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ö—É–∫ `useDocumentUpload`.
    - [ ] –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—Ñ–∏–ª—å—Ç—Ä—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, –≤—ã–±–æ—Ä) –≤ —Ö—É–∫ `useAdminDocuments`.

---

## Epic 3: –ú–æ–¥–µ–ª—å "–°–æ–∑–¥–∞—Ç–µ–ª—å/–ê–≤—Ç–æ—Ä" –∏ –ü—Ä–æ—Ñ–∏–ª–∏

- **–°—Ç–∞—Ç—É—Å:** üåó **–ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (Backend).**
- **–ó–∞–¥–∞—á–∞:** –†–∞–∑–¥–µ–ª–∏—Ç—å –ø–æ–Ω—è—Ç–∏—è "–°–æ–∑–¥–∞—Ç–µ–ª—è" –∏ "–ê–≤—Ç–æ—Ä–∞" –¥–æ–∫—É–º–µ–Ω—Ç–∞, –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### Backend (‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ)
- [x] **Schema:** –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –º–æ–¥–µ–ª–∏ `User`, `Document`. –î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `Profile` –∏ enum `UserStatus`.
- [x] **AuthService:** –ó–∞–ø—Ä–µ—â–µ–Ω –ª–æ–≥–∏–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `PLACEHOLDER`.
- [x] **UserService:** –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å —Å –º–µ—Ç–æ–¥–æ–º `findOrCreateAuthor`.
- [x] **API –†–æ—É—Ç—ã:** –í —Ä–æ—É—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º —Å–µ—Ä–≤–∏—Å–æ–≤.
- [x] **–°–µ—Ä–≤–∏—Å—ã –î–æ–∫—É–º–µ–Ω—Ç–æ–≤:** –û–±–Ω–æ–≤–ª–µ–Ω—ã —Å–∏–≥–Ω–∞—Ç—É—Ä—ã –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –ø—Ä–∏–µ–º–∞ DTO. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ —Å —É—á–µ—Ç–æ–º `creatorId`.

### Frontend (‚è≥ –í –ø–ª–∞–Ω–∞—Ö)
- [ ] **UI:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `AuthorSelector` –¥–ª—è –≤—ã–±–æ—Ä–∞ –∞–≤—Ç–æ—Ä–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
- [ ] **UI:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ).

---

## Epic 4: –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞

### 4.1. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –≤ FlexSearch
- **–ó–∞–¥–∞—á–∞:** –£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–∏—Å–∫–∞ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞.
- **–ó–∞–¥–∞—á–∏:**
    - [ ] –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Å—Ç–µ–º–º–∏–Ω–≥–∞ –∏ —Ñ–æ–Ω–µ–º –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å FlexSearch.
    - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—á–∞—Ç–æ–∫.

---

## Epic 5: –ù–æ–≤—ã–µ —Ñ–∏—á–∏

- [ ] **–°–∏—Å—Ç–µ–º–∞ "–°–µ–∫—Ä–µ—Ç–Ω—ã—Ö" –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** (–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
- [ ] **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤-—Å—Å—ã–ª–æ–∫ (—Ç–∏–ø `REFERENCE`)**
- [ ] **–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ (OCR)**

---

## Epic 5: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ DX (Developer Experience)

### 5.1. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (OpenAPI/Swagger)
- **–ó–∞–¥–∞—á–∞:** –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è API.
- **–ó–∞–¥–∞—á–∏:**
    - [ ] –í—ã–±—Ä–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ OpenAPI —Å–ø–µ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `swagger-jsdoc` –∏–ª–∏ `next-swagger-doc`).
    - [ ] –ù–∞–ø–∏—Å–∞—Ç—å JSDoc –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö API —Ä–æ—É—Ç–æ–≤.
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Swagger UI).

### 5.2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ó–∞–¥–∞—á–∞:** –ü–æ–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç —Ç–µ—Å—Ç–∞–º–∏.
- **–ó–∞–¥–∞—á–∏:**
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Jest –∏ React Testing Library.
    - [ ] –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏ —É—Ç–∏–ª–∏—Ç.
    - [ ] –ù–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è API —Ä–æ—É—Ç–æ–≤.

### 5.3. CI/CD
- **–ó–∞–¥–∞—á–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–ø–ª–æ–π.
- **–ó–∞–¥–∞—á–∏:**
    - [ ] –°–æ–∑–¥–∞—Ç—å workflow –¥–ª—è GitHub Actions.
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —à–∞–≥–∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –ª–∏–Ω—Ç–∏–Ω–≥–∞, —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤.

### 5.4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ó–∞–¥–∞—á–∞:** –£–ª—É—á—à–∏—Ç—å –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
- **–ó–∞–¥–∞—á–∏:**
    - [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å `pino` –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫ –¥–ª—è Prometheus.